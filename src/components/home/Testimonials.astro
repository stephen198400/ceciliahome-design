---
const testimonials = [
  {
    name: "Jennifer Martinez",
    platform: "Houzz",
    content: "Mason and his team at Cecilia Home designed our ADU perfectly. The attention to detail in structural design and their knowledge of California building codes made the permit process smooth. Really appreciate their professional service!",
    rating: 5,
    image: "/src/assets/Testimonials/jennifer-martinez.png"
  },
  {
    name: "Robert Chen",
    platform: "Google Reviews",
    content: "Had Cecilia Home help with our restaurant renovation in San Francisco. Mason understood exactly what we needed - from seismic retrofitting to interior layout. The team's expertise in commercial design really shows. Highly recommended!",
    rating: 4.8,
    image: "/src/assets/Testimonials/robert-chen.png"
  },
  {
    name: "Amanda Thompson",
    platform: "HomeAdvisor",
    content: "After the wildfire damage, we were lost about how to rebuild. Cecilia Home's team, especially Mason, guided us through the entire restoration process. They not only repaired the structural damage but also improved the overall design. Can't thank them enough!",
    rating: 5,
    image: "/src/assets/Testimonials/amanda-thompson.png"
  },
  {
    name: "David Wong",
    platform: "Thumbtack",
    content: "Working with Cecilia Home on our home renovation was a great experience. They handled the structural reinforcement and design updates professionally. Mason's team was always responsive and detail-oriented.",
    rating: 4.7,
    image: "/src/assets/Testimonials/david-wong.png"
  },
  {
    name: "Lisa Garcia",
    platform: "Facebook",
    content: "Hired Cecilia Home for our retaining wall project. Mason personally came to inspect the site and provided detailed solutions. Their engineering expertise is impressive, and the final result exceeded our expectations.",
    rating: 4.9,
    image: "/src/assets/Testimonials/lisa-garcia.png"
  },
  {
    name: "Michael Zhang",
    platform: "Google Reviews",
    content: "Cecilia Home designed and managed our duplex ADU project. Mason's team handled everything from initial design to permit approval. Their knowledge of local regulations and efficient process saved us so much time.",
    rating: 4.8,
    image: "/src/assets/Testimonials/michael-zhang.png"
  },
  {
    name: "Sarah Miller",
    platform: "Houzz",
    content: "The structural inspection service from Cecilia Home was thorough and professional. Mason explained everything in detail and provided clear recommendations for our century-old house. Really appreciated their expertise!",
    rating: 5,
    image: "/src/assets/Testimonials/sarah-miller.png"
  },
  {
    name: "Kevin Patel",
    platform: "Instagram",
    content: "Mason and the Cecilia Home team did an amazing job with our spa's renovation. From structural modifications to interior design, everything was handled professionally. They really understand commercial space requirements.",
    rating: 4.9,
    image: "/src/assets/Testimonials/kevin-patel.png"
  }
];

function renderStars(rating: number) {
  return Array.from({ length: 5 }).map((_, i) => (
    i < rating ? 
      '<svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>' :
      '<svg class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>'
  )).join('');
}

// 为了确保滚动的连续性，我们需要更多重复
const duplicatedTestimonials = [...testimonials, ...testimonials, ...testimonials]; // 15张卡片
---

<section class="py-16 bg-gray-50 overflow-hidden">
  <div>
    <div class="text-center mb-12 px-4">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
        What Our Clients Say
      </h2>
      <p class="text-lg text-gray-600 max-w-2xl mx-auto">
        Don't just take our word for it. Here's what our satisfied clients have to say about their experience working with us.
      </p>
    </div>

    {/* 桌面端静态展示 */}
    <div class="hidden sm:block">
      <div class="max-w-7xl mx-auto px-4">
        {/* 第一行 */}
        <div class="grid grid-cols-4 gap-6 mb-6">
          {testimonials.slice(0, 4).map(testimonial => (
            <div class="bg-white rounded-xl p-6 shadow-sm">
              <div class="flex items-center gap-4 mb-4">
                <img 
                  src={testimonial.image} 
                  alt={testimonial.name}
                  class="w-12 h-12 rounded-full object-cover"
                />
                <div>
                  <h3 class="font-semibold text-gray-900">{testimonial.name}</h3>
                  <p class="text-sm text-gray-500">{testimonial.platform}</p>
                </div>
              </div>
              <div class="flex mb-4" set:html={renderStars(testimonial.rating)} />
              <p class="text-gray-600 leading-relaxed line-clamp-3">
                {testimonial.content}
              </p>
            </div>
          ))}
        </div>
        {/* 第二行 */}
        <div class="grid grid-cols-4 gap-6">
          {testimonials.slice(4, 8).map(testimonial => (
            <div class="bg-white rounded-xl p-6 shadow-sm">
              <div class="flex items-center gap-4 mb-4">
                <img 
                  src={testimonial.image} 
                  alt={testimonial.name}
                  class="w-12 h-12 rounded-full object-cover"
                />
                <div>
                  <h3 class="font-semibold text-gray-900">{testimonial.name}</h3>
                  <p class="text-sm text-gray-500">{testimonial.platform}</p>
                </div>
              </div>
              <div class="flex mb-4" set:html={renderStars(testimonial.rating)} />
              <p class="text-gray-600 leading-relaxed line-clamp-3">
                {testimonial.content}
              </p>
            </div>
          ))}
        </div>
      </div>
    </div>

    {/* 移动端垂直展示 */}
    <div class="block sm:hidden px-4">
      <div class="space-y-4">
        {testimonials.slice(0, 3).map(testimonial => (
          <div class="bg-white rounded-xl p-6 shadow-sm">
            <div class="flex items-center gap-4 mb-4">
              <img 
                src={testimonial.image} 
                alt={testimonial.name}
                class="w-12 h-12 rounded-full object-cover"
              />
              <div>
                <h3 class="font-semibold text-gray-900">{testimonial.name}</h3>
                <p class="text-sm text-gray-500">{testimonial.platform}</p>
              </div>
            </div>
            <div class="flex mb-4" set:html={renderStars(testimonial.rating)} />
            <p class="text-gray-600 leading-relaxed">
              {testimonial.content}
            </p>
          </div>
        ))}
        
        {/* 查看更多按钮 */}
        <div class="text-center mt-8">
          <button class="inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
            <span>View More Reviews</span>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>


